<!DOCTYPE html>
<!-- saved from url=(0052)http://getbootstrap.com/docs/4.0/examples/dashboard/ -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>Dashboard Template for Bootstrap</title>
<!-- Bootstrap core CSS -->
<link href="/asserts/css/bootstrap.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="/asserts/css/dashboard.css" rel="stylesheet">
<style type="text/css">
/* Chart.js */
@
-webkit-keyframes chartjs-render-animation {from { opacity:0.99
	
}

to {
	opacity: 1
}

}
@
keyframes chartjs-render-animation {from { opacity:0.99
	
}

to {
	opacity: 1
}

}
.chartjs-render-monitor {
	-webkit-animation: chartjs-render-animation 0.001s;
	animation: chartjs-render-animation 0.001s;
}

#popLayer {
	display: none;
	background-color: #B3B3B3;
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	z-index: 10;
	-moz-opacity: 0.8;
	opacity: .80;
	filter: alpha(opacity = 80); /* 只支持IE6、7、8、9 */
}

/*弹出层*/
#popBox, #popBox1 {
	display: none;
	background-color: #FFFFFF;
	z-index: 11;
	width: 300px;
	height: 50px;
	position: fixed;
	top: 0;
	right: 0;
	left: 0;
	bottom: 0;
	margin: auto;
}

#popBox2 {
	display: none;
	background-color: #FFFFFF;
	z-index: 11;
	width: 1024px;
	height: 768px;
	position: fixed;
	top: 0;
	right: 0;
	left: 0;
	bottom: 0;
	margin: auto;
}
</style>
</head>

<body>
	<!-- <nav class="navbar navbar-light bg-light sticky-top  flex-md-nowrap p-0">
			<a class="navbar-brand col-sm-3 col-md-2 mr-0" href="">
			<img src="/asserts/images/logo.png" width="40%"></a>
			<ul class="navbar-nav px-3">
				<li class="nav-item text-nowrap">
					<a class="nav-link" href="">[[${session.userLogin}]]</a>
				</li>
			</ul>
		</nav> -->

	<div class="container-fluid">
		<div class="row">
			<!-- <nav class="col-md-2 d-none d-md-block bg-light sidebar">
					<div class="sidebar-sticky">
						<ul class="nav flex-column">
							<li class="nav-item">
								<a class="nav-link" href="/list/1">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
										<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
										<polyline points="9 22 9 12 15 12 15 22"></polyline>
									</svg>
									登陆日志 <span class="sr-only">(current)</span>
								</a>
							</li>
							<li class="nav-item ">
								<a class="nav-link active" href="">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
										<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
										<polyline points="13 2 13 9 20 9"></polyline>
									</svg>
									敏感词 
								</a>
							</li>
						</ul>		
					</div>
				</nav> -->



			<input type="button" class="btn btn-primary" name="popBox" value="添加"
				onclick="popBox()">
			 <input type="button" class="btn btn-primary" name="popBox" value="操作日志"
				onclick="getdata(1)">
			<form  class="seach" id="searchForm" action="/search">
			 <div class="col-md-12">
              <div class="input-group">
               <input type="text" class="form-control" placeholder="Search for..." name="q">
                <span class="input-group-btn">
              <button class="btn btn-default" type="submit">搜索</button>
            </span>
              </div><!-- /input-group -->
           </div><!-- /.col-lg-6 -->
           </form>
			<div id="popLayer"></div>
			<div id="popBox">
				<form class="form-inline" name="input" action="/loginsert"
					method="post">
					<div class="form-group">
						<label class="sr-only" for="exampleInputEmail3">Email
							address</label> <input type="text" class="form-control"
							id="exampleInputEmail3" placeholder="敏感词" name="word">
					</div>
					<button type="submit" class="btn btn-default">添加</button>
				</form>
			</div>
			<div id="popBox1">
				<form class="form-inline" name="input11" action="/logupdata"
					onSubmit="return mySubmit()" method="post">
					<div class="form-group">
						<label class="sr-only">Email address</label> <input type="text"
							class="form-control sr-only" id="id11" placeholder="敏感词"
							name="id"> <input type="text" class="form-control"
							id="badword11" placeholder="敏感词" name="badWord">
					</div>
					<button type="submit" class="btn btn-default" id="btn11">确定</button>
				</form>
			</div>
			<div id="popBox2">
				<div>
					<button style="float: right"
						th:onclick="document.getElementById('popLayer').style.display='none';document.getElementById('popBox2').style.display='none'"
						class="btn btn-sm btn-danger btn-info">关闭</button>
					<ul class="pagination" style="float: left">
						<li class="page-item"><a class="page-link" id="11"
							href="javascript:void(0);">首页</a></li>
						<li class="page-item"><a class="page-link" id="12"
							href="javascript:void(0);">上页</a></li>
						<li class="page-item"><a class="page-link" id="13"
							href="javascript:void(0);">下页</a></li>
						<li class="page-item"><a class="page-link" id="14"
							href="javascript:void(0);">尾页</a></li>
					</ul>
				</div>
				<table class="table table-striped table-sm table-bordered">
					<thead>
						<tr>
							<th>用户ip</th>
							<th>执行时间</th>
							<th>用户活动</th>
						</tr>
					</thead>
					<tbody id="tablebody">
					</tbody>
				</table>


			</div>
			<div class="table-responsive">
				<table class="table table-striped table-sm table-bordered">
					<thead>
						<tr>
							<th>ID</th>
							<th>敏感词</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="user:${PageInfo.list}">
							<td th:text="${user.id}"></td>
							<td th:text="${user.badWord}"></td>
							<td>
								<button th:onclick="updata([[${user}]])"
									class="btn btn-sm btn-danger btn-info">编辑</button>
								<button th:attr="del_uri=@{/logdelete?id=}+${user.id}"
									class="btn btn-sm btn-danger deleteBtn">删除</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="row">
				<div class="col-md-4 offset-md-8">
					<nav aria-label="Page navigation example">
						<ul class="pagination">
							<li class="page-item"><a class="page-link" href="/log/1">首页</a></li>
							<li class="page-item"><a class="page-link" href="#"
								aria-label="Previous" th:href="@{/log/}+${PageInfo.prePage}">
									<span aria-hidden="true">&laquo;</span> <span class="sr-only">Previous</span>
							</a></li>

							<li class="page-item"><a class="page-link"
								th:if="${PageInfo.pageNum-2>=1&& PageInfo.pageNum == PageInfo.pages}"
								th:href="@{/list/}+${PageInfo.pageNum-2}"
								th:text="${PageInfo.pageNum-2}"></a></li>
							<li class="page-item"><a class="page-link"
								th:if="${PageInfo.pageNum-1>=1}"
								th:href="@{/list/}+${PageInfo.pageNum-1}"
								th:text="${PageInfo.pageNum-1}"></a></li>
							<li class="page-item"><a class="page-link"
								th:href="@{/list/}+${PageInfo.pageNum}"
								th:text="${PageInfo.pageNum}"></a></li>
							<li class="page-item"><a class="page-link"
								th:if="${PageInfo.pageNum+1<=PageInfo.pages}"
								th:href="@{/list/}+${PageInfo.pageNum+1}"
								th:text="${PageInfo.pageNum+1}"></a></li>
							<li class="page-item"><a class="page-link"
								th:if="${PageInfo.pageNum+2<=PageInfo.pages&&PageInfo.pageNum<2}"
								th:href="@{/list/}+${PageInfo.pageNum+2}"
								th:text="${PageInfo.pageNum+2}"></a></li>

							<li class="page-item"><a class="page-link" href="#"
								aria-label="Next" th:href="@{/log/}+${PageInfo.nextPage}"> <span
									aria-hidden="true">&raquo;</span> <span class="sr-only">Next</span>
							</a></li>
							<li class="page-item"><a class="page-link"
								th:href="@{/log/}+${PageInfo.pages}">尾页</a></li>
						</ul>
					</nav>
				</div>
			</div>
			<form id="deleteEmpForm" method="post">
				<input type="hidden" name="_method" value="delete" />
			</form>

			</main>
		</div>
	</div>

	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script type="text/javascript"
		src="/asserts/js/jquery-3.2.1.slim.min.js"></script>
	<script type="text/javascript" src="/asserts/js/popper.min.js"></script>
	<script type="text/javascript" src="/asserts/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/asserts/js/jquery-1.7.2.min.js"></script>
	<!-- Icons -->
	<script type="text/javascript" src="/asserts/js/feather.min.js"></script>
	<script>
			feather.replace()
		</script>

	<!-- Graphs -->
	<script type="text/javascript" src="/asserts/js/Chart.min.js"></script>
	<script>
			var ctx = document.getElementById("myChart");
			/* var myChart = new Chart(ctx, {
				type: 'line',
				data: {
					labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
					datasets: [{
						data: [15339, 21345, 18483, 24003, 23489, 24092, 12034],
						lineTension: 0,
						backgroundColor: 'transparent',
						borderColor: '#007bff',
						borderWidth: 4,
						pointBackgroundColor: '#007bff'
					}]
				},
				options: {
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero: false
							}
						}]
					},
					legend: {
						display: false,
					}
				}
			}); */
			
			 /*点击弹出按钮*/
		    function popBox() {
		        var popBox = document.getElementById("popBox");
		        var popLayer = document.getElementById("popLayer");
		        popBox.style.display = "block";
		        popLayer.style.display = "block";
		    };
		    $(".deleteBtn").click(function(){
		        //删除当前员工的
		        $("#deleteEmpForm").attr("action",$(this).attr("del_uri")).submit();
		        return false;
		    });
		    
		    function updata(data1){
		    	$("#id11").val(data1.id);
			    $("#badword11").val(data1.badWord);
			    $("#id11").text(data1.id);
			    $("#badword11").text(data1.badWord);
		    	 var popBox = document.getElementById("popBox1");
			     var popLayer = document.getElementById("popLayer");
			     popBox.style.display = "block";
			     popLayer.style.display = "block";
		    };
		    function mySubmit()
		    {
		    	var url=window.location.href;
		    	var mydata={id:"",badWord:""};
		    	mydata.id=input11.id.value;
		    	mydata.badWord=input11.badWord.value
		  
		     	$.post("/logupdata",mydata,function(data,status){
		     		window.location.href=url;
		     	});
		    	return false;
		    };
		    
		    function getdata(page){
				if(page==0)
					return;
				 $.getJSON("/badwordlog/"+page,function(data,status){
					 $("#tablebody").empty();
					 for(var item of data.list) { // item代表数组里面的元素
						 
						 var $tr = $("<tr>"+
							        "<td>"+item.ip+"</td>"+
							        "<td>"+item.time+"</td>"+
							        "<td>"+item.action+"</td>"+
							        +"</tr>");
						 $("#tablebody").append($tr);
						};
						$("#11").attr("onclick","getdata(1)"); 
						$("#12").attr("onclick","getdata("+data.prePage+")"); 
						$("#13").attr("onclick","getdata("+data.nextPage+")"); 
						$("#14").attr("onclick","getdata("+data.pages+")"); 
					  });
				
				 var popBox = document.getElementById("popBox2");
			     var popLayer = document.getElementById("popLayer");
			     if(popBox.style.display!="block")
			     {popBox.style.display = "block";
			     popLayer.style.display = "block";		}     
		    };
		</script>

</body>

</html>